<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Хранилище изображений</title>
</head>
<body>
<h1>Хранилище изображений</h1>
<h2>Загрузка изображения в хранилище</h2>
<p>Загрузка изображения в хранилище осуществляется с помощью POST-запроса на <code>/add</code>.</p>
<p>Тело запроса должно содержать бинарный код изображения.</p>
<p>Запрос должен включать в себя соответствующий HTTP-заголовок <code>Content-Type</code> ("image/jpeg" для JPEG, "image/gif" для GIF и т. д.).</p>
<p>В ответ сервис вовзращает объект, содержащий ссылку на загруженное изображение.</p>
<p>По умолчанию, объект ответа сериализуется в JSON (соответствутет Accept: application/json). Для получения ответа в формате XML необходимо указать заголовок Accept: application/xml</p>
<p>Пример ответа сервиса в XML: <code>&lt;UploadResult&gt;&lt;Uri>http://localhost:49564/6a/6c/e6/be/7293bda121bb397803cc61c8.jpg&lt;/Uri&gt;&lt;/UploadResult&gt;</code></p>
<p>Пример ответа сервиса в JSON: <code>{ "uri": "http://localhost:49564/6a/6c/e6/be/7293bda121bb397803cc61c8.jpg" }</code>
<br />
<p>Функционал предоставления информации по перцептивным хешам осуществляется с помощью обратных вызовов.</p>
<p>Для получения информации необходимо передать в заголовке URL обратного вызова, например так: <code>X-CallbackUrl: http://example.com/callback.php</code></p>
<p>Как только система рассчитает необходимые данные, она передаст их POST-запросом на указанный адрес.</p>
<h2>Получение изображения</h2>
<p>Для получения изображения нужно выполнить GET-запрос по полученной при загрузке ссылке.</p>
<p>Ссылка в общем виде выглядит так <code>/f5/61/aa/f6/ef0bf14d4208bb46a4ccb3ad.jpg</code></p>
<h2>Примечания</h2>
<p>В дальнейшем, будет добавлена возможность запроса изображений определенных размеров. Для этого нужно будет использовать ссылку вида <code>/f5/61/aa/f6/ef0bf14d4208bb46a4ccb3ad<strong>[_x]</strong>.jpg</code>, где x - размер изображени из определенного набора</p>
<p>Формат передачи данных при обратном вызове еще не утвержден, т. к. требует доработки сервиса расчета хешей.</p>
</body>
</html>